{% extends "base.html" %} {% block title %}Encrypt / Decrypt - AES Encryptor{% endblock %} {% block content %}
<h2>Welcome, {{ username }}!</h2>
<p>Encrypt or decrypt your files securely.</p>

<form method="POST" enctype="multipart/form-data" class="mt-4">
    <div class="mb-3">
        <label for="mode" class="form-label">Mode</label>
        <select id="mode" name="mode" class="form-select" onchange="toggleKeyFile()" required>
      <option value="encrypt" selected>Encrypt</option>
      <option value="decrypt">Decrypt</option>
    </select>
    </div>

    <div class="mb-3">
        <label for="file" class="form-label">Select File</label>
        <input type="file" name="file" id="file" class="form-control" required>
    </div>

    <div class="mb-3" id="keyfile-div" style="display:none;">
        <label for="keyfile" class="form-label">Upload Key File (for decryption)</label>
        <input type="file" name="keyfile" id="keyfile" class="form-control">
    </div>

    <div class="mb-3">
        <label for="password" class="form-label">Password / Key</label>
        <input type="password" name="password" id="password" class="form-control" required>
    </div>

    <button type="submit" class="btn btn-success w-100">Process</button>
</form>

<script>
    function toggleKeyFile() {
        const mode = document.getElementById('mode').value;
        const keyfileDiv = document.getElementById('keyfile-div');
        if (mode === 'decrypt') {
            keyfileDiv.style.display = 'block';
        } else {
            keyfileDiv.style.display = 'none';
        }
    }
</script>

{% endblock %}